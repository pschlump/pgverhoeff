
/**
 * Converts a string to title case, where the first letter of each word is uppercase
 * and the rest are lowercase.
 * 
 * @param str The string to convert (modified in-place)
 * @return Pointer to the modified string
 */
static void to_title_case(char* str, int32 len) {
	int new_word = 1;  // Flag to track word boundaries
	int i;

	// FILE *fp;
	// fp = fopen ( "/tmp/aa.aa", "w");

	str[len] = '\0';	/* !! dangerous !! */
	// fprintf ( fp, "v1.2.04 AT a >%s<, len %d\n", str, len );
	for (i = 0; i < len; i++) {
		// fprintf ( fp, "AT b, i=%d >%c<\n", i, str[i] );
		if (isspace(str[i]) || ispunct(str[i])) {
			new_word = 1;  // Next character will be the start of a new word
			str[i] = str[i];
		} else {
			if (new_word) {
				str[i] = toupper(str[i]);  // Convert first letter of word to uppercase
				new_word = 0;
			} else {
				str[i] = tolower(str[i]);  // Convert rest of letters to lowercase
			}
		}
	}
	str[i] = '\0';	/* !! dangerous !! */
	// fprintf ( fp, "AT c, string modified = >%s<\n", str );
	// fclose ( fp );
}
